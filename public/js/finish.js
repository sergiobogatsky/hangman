(()=>{"use strict";class e{constructor(){}static startGame(e,t){fetch("./api/new-game",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:e,players:t,winner:"",word:"",turn:t[0].id,step:0,letters_accepted:[],letters_failed:[]})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("error")?console.log(e.error):window.location.href="game"})).catch((function(e){console.error(e)}))}static async getGame(e){return await fetch("./api/get-game",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:e})}).then(await(function(e){return e.json()})).then(await(function(e){return e.hasOwnProperty("error")?e.error:e})).catch(await(function(e){console.error(e)}))}static setGame(e){fetch("./api/set-game",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("error")?console.log(e.error):console.log(e)})).catch((function(e){console.error(e)}))}static async getNewSuperhero(){return await fetch("./api/new-hero",{method:"get"}).then(await(function(e){return e.text()})).catch(await(function(e){return console.error(e),e}))}}class t{constructor(){}static setCookie(e,t,n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var r="expires="+o.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}static setRandomCookieValue(e){let t=Math.ceil(e/13);return new Array(t).fill((function(){return Math.random().toString(16).substring(2,15)})).reduce(((e,t)=>e+t()),"").substring(0,e)}static getCookie(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}static checkTokenValue(e,t){""==this.getCookie(e)&&this.setCookie(e,t,7)}}window.onload=async function(){t.checkTokenValue("hangmanGameToken",t.setRandomCookieValue(15)),t.checkTokenValue("letter","black"),t.checkTokenValue("background","white"),document.body.style.background=t.getCookie("background");for(const e of document.getElementsByTagName("*"))e.style.color=t.getCookie("letter");const n=await e.getGame(t.getCookie("hangmanGameToken"));console.log(n.winner),document.getElementById("winner").innerHTML=n.winner,document.getElementById("losers").innerHTML=n.players.filter((e=>e.name!=n.winner)).map((e=>e.name)),document.getElementById("superhero").innerHTML="SUPERHERO: "+n.word.toUpperCase(),document.getElementById("same_game").addEventListener("click",(async function(){console.log("same_game"),n.winner="",n.letters_accepted=[],n.letters_failed=[],n.step=0,n.word=await e.getNewSuperhero(),console.log(n.word),await e.setGame(n),await new Promise((e=>setTimeout(e,500))),window.location.href="game"}))}})();