(()=>{"use strict";class e{constructor(){}static setCookie(e,t,n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var a="expires="+o.toUTCString();document.cookie=e+"="+t+";"+a+";path=/"}static setRandomCookieValue(e){let t=Math.ceil(e/13);return new Array(t).fill((function(){return Math.random().toString(16).substring(2,15)})).reduce(((e,t)=>e+t()),"").substring(0,e)}static getCookie(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""}static checkTokenValue(e,t){""==this.getCookie(e)&&this.setCookie(e,t,7)}}const t=document.getElementById("names");window.onload=function(){e.checkTokenValue("hangmanGameToken",e.setRandomCookieValue(15)),e.checkTokenValue("letter","black"),e.checkTokenValue("background","white"),document.body.style.background=e.getCookie("background");for(const t of document.getElementsByTagName("*"))t.style.color=e.getCookie("letter");document.getElementById("number_of_players").addEventListener("input",(function(){if(this.value<=0)return;let e=t.childElementCount,n=this.value-e;n>0?function(e){for(let n=e;n>0;n--){let e=document.createElement("div");e.setAttribute("class","input-field col s12");let o=document.createElement("input");o.setAttribute("name",n),o.setAttribute("class","validate flow-text names"),o.setAttribute("type","text");let a=document.createElement("label");a.innerHTML="PLAYER NAME",e.appendChild(o),e.appendChild(a),t.appendChild(e)}}(n):function(e){for(let n=e=-e;n>0;n--)t.removeChild(t.lastElementChild)}(n)})),document.getElementById("start_game").addEventListener("click",(function(){!function(){let e=document.getElementsByClassName("names");for(const t of e)if(""==t.value)return!1;return!0}()?function(){let e=document.createElement("div");e.setAttribute("class","chip"),e.innerHTML='Please put all the names of the players <i class="close material-icons">close</i>',document.getElementById("numbers").appendChild(e)}():class{constructor(){}static startGame(e,t){fetch("./api/new-game",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:e,players:t,winner:"",word:"",turn:t[0].id,step:0,letters_accepted:[],letters_failed:[]})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("error")?console.log(e.error):window.location.href="game"})).catch((function(e){console.error(e)}))}static async getGame(e){return await fetch("./api/get-game",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:e})}).then(await(function(e){return e.json()})).then(await(function(e){return e.hasOwnProperty("error")?e.error:e})).catch(await(function(e){console.error(e)}))}static setGame(e){fetch("./api/set-game",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("error")?console.log(e.error):console.log(e)})).catch((function(e){console.error(e)}))}}.startGame(e.getCookie("hangmanGameToken"),function(){let e=[],t=document.getElementsByClassName("names");for(const n of t)e.push({id:n.name,name:n.value,step:0,wins:0,losses:0});return e}())}))}})();